# Troubleshooting Format Specification

**Document Type**: `troubleshooting.md`
**Purpose**: Common problems, solutions, and diagnostic guidance
**Target**: Consumption graph output
**Generated By**: ContentGenerator tool

## Purpose

Troubleshooting documents provide focused problem-solving information that helps LLMs diagnose issues and provide solutions. They emphasize practical resolution steps over conceptual explanations, enabling effective problem-solving assistance.

## Structure Requirements

### Header
```markdown
# [Topic Name] Troubleshooting

Common problems and solutions for [topic name].
```

### Core Sections

1. **Common Errors** (Required)
   - Most frequently encountered error messages
   - Typical causes for each error
   - Step-by-step resolution procedures

2. **Performance Issues** (Required)
   - Common performance problems
   - Diagnostic approaches
   - Optimization solutions

3. **Configuration Problems** (Required if applicable)
   - Setup and configuration issues
   - Missing dependencies
   - Environment-specific problems

4. **Debugging Techniques** (Optional)
   - Diagnostic tools and approaches
   - Logging and monitoring strategies
   - Testing methodologies

## Content Guidelines

### Problem Structure
Each problem should follow a consistent format:

```markdown
### [Problem Title]

**Symptoms**: Description of observable behavior
**Common Causes**: Most likely root causes
**Solution**: Step-by-step resolution steps
**Prevention**: How to avoid this problem
```

### Writing Style
- **Problem-Focused**: Lead with symptoms users experience
- **Solution-Oriented**: Provide clear, actionable steps
- **Diagnostic**: Help identify root causes
- **Preventive**: Include guidance to avoid future issues

### Technical Requirements
- **Specific Error Messages**: Include exact error text when possible
- **Code Examples**: Show both problematic and corrected code
- **Tool References**: Mention specific diagnostic tools
- **Version Awareness**: Note version-specific issues when relevant

## Content Prioritization

### Problem Selection Criteria
1. **Frequency**: Most commonly reported issues
2. **Impact**: Problems that significantly affect functionality
3. **Difficulty**: Issues that are hard to diagnose or resolve
4. **Learning Value**: Problems that teach important concepts

### Solution Approach
- **Root Cause**: Address underlying causes, not just symptoms
- **Multiple Options**: Provide alternative solutions when available
- **Escalation Path**: When to seek additional help
- **Verification**: How to confirm the problem is resolved

## Quality Standards

### Similarity Requirements
- Must align with golden reference best practices
- Solutions must reflect current .NET recommendations
- Should complement information in other document types

### Content Validation
- All solutions must be technically accurate
- Error messages must be current and correct
- Resolution steps must be tested and verified
- Code examples must be syntactically correct

## Example Structure

```markdown
# File I/O Troubleshooting

Common problems and solutions for file operations in .NET.

## Common Errors

### "Access to the path is denied"

**Symptoms**: UnauthorizedAccessException when accessing files or directories
**Common Causes**:
- Insufficient file permissions
- File is in use by another process
- Attempting to write to read-only file
- Directory permissions prevent access

**Solution**:
1. Check file permissions in Windows Explorer or using `icacls`
2. Ensure file is not open in another application
3. Use `File.SetAttributes()` to remove read-only attribute:
   ```csharp
   File.SetAttributes(path, File.GetAttributes(path) & ~FileAttributes.ReadOnly);
   ```
4. Run application with elevated permissions if needed

**Prevention**: Always check file attributes and handle exceptions gracefully

### "The process cannot access the file because it is being used by another process"

**Symptoms**: IOException when trying to access a file
**Common Causes**:
- File handle not properly disposed
- Multiple threads accessing same file
- External application has file open

**Solution**:
1. Ensure using statements properly dispose file handles:
   ```csharp
   using (var stream = File.OpenRead(path))
   {
       // File operations
   } // Automatically disposed here
   ```
2. Use file sharing modes when appropriate:
   ```csharp
   using var stream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.Read);
   ```
3. Implement retry logic with delays for temporary locks

**Prevention**: Always use `using` statements or explicit disposal for file operations

## Performance Issues

### Slow File Reading

**Symptoms**: File operations taking longer than expected
**Common Causes**:
- Reading large files synchronously
- Not using buffered streams
- Inefficient reading patterns

**Solution**:
1. Use async methods for large files:
   ```csharp
   string content = await File.ReadAllTextAsync(path);
   ```
2. Use appropriate buffer sizes:
   ```csharp
   using var stream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.Read, bufferSize: 65536);
   ```
3. Read in chunks for very large files:
   ```csharp
   using var reader = new StreamReader(path);
   while (!reader.EndOfStream)
   {
       string line = await reader.ReadLineAsync();
       // Process line
   }
   ```

**Prevention**: Use async methods and appropriate buffer sizes from the start

## Configuration Problems

### File Not Found in Published Application

**Symptoms**: FileNotFoundException in deployed application but works in development
**Common Causes**:
- Relative paths that work in development but not production
- Files not included in publish output
- Case sensitivity differences between platforms

**Solution**:
1. Use absolute paths or paths relative to application base:
   ```csharp
   string path = Path.Combine(AppContext.BaseDirectory, "data.txt");
   ```
2. Ensure files are marked as "Copy to Output Directory" in project file:
   ```xml
   <Content Include="data.txt">
     <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
   </Content>
   ```
3. Use embedded resources for files that must be included:
   ```csharp
   var assembly = Assembly.GetExecutingAssembly();
   using var stream = assembly.GetManifestResourceStream("MyApp.data.txt");
   ```

**Prevention**: Use proper path resolution and verify files are included in deployment

## Debugging Techniques

### Diagnosing File Access Issues

**Approach**: Use process monitoring tools to understand file system activity
**Tools**:
- Process Monitor (ProcMon) on Windows
- `lsof` command on Linux/macOS
- Built-in .NET logging

**Implementation**:
```csharp
// Enable file system logging
using var loggerFactory = LoggerFactory.Create(builder => builder.AddConsole());
var logger = loggerFactory.CreateLogger<FileProcessor>();

try
{
    logger.LogInformation("Attempting to read file: {FilePath}", path);
    var content = File.ReadAllText(path);
    logger.LogInformation("Successfully read {ByteCount} characters", content.Length);
}
catch (Exception ex)
{
    logger.LogError(ex, "Failed to read file: {FilePath}", path);
    throw;
}
```

**Analysis**: Review logs to identify patterns in failures and correlate with system events
```

## Generation Notes

When ContentGenerator creates troubleshooting documents:

1. **Error Analysis**: Identify most common error patterns from golden reference and community sources
2. **Solution Validation**: Ensure all solutions are tested and current
3. **Diagnostic Focus**: Emphasize helping users identify root causes
4. **Practical Approach**: Provide step-by-step resolution procedures
5. **Prevention Guidance**: Include best practices to avoid problems

Troubleshooting documents should enable LLMs to effectively diagnose and resolve common problems users encounter with the topic.